<header>
  <div class="header-content">
    <img src="/assets/LAS logo.PNG" style="width: 80px;" alt="Logo">

    <nav class="nav-links">
      <a routerLink="/home">Home</a>
      <a routerLink="/about">About</a>
      <a routerLink="/auctions">Auctions</a>
      <a routerLink="/contact">Contact</a>
      <a routerLink="/sell-item">Auction Your Item</a>
    </nav>

    <div class="right-menu">

      <!-- <a href="#" *ngIf="isLoggedIn" (click)="openModal($event)"><i class="fa-solid fa-user"></i>&nbsp;</a>
      <a (click)="openMyBidsPopup()" *ngIf="isLoggedIn" style="cursor: pointer;"><i class="fa-solid fa-gavel"
          style="cursor: pointer;"></i>&nbsp;</a>
      <a (click)="openNotificationsPopup()" *ngIf="isLoggedIn" style="cursor: pointer;"><i class="fa-solid fa-bell"
          style="cursor: pointer;"></i>&nbsp;</a>
      <a (click)="openOrdersPopup()" *ngIf="isLoggedIn" style="cursor: pointer;"><i class="fa-solid fa-box"
          style="cursor: pointer;"></i>&nbsp;</a> -->

          <a href="#" *ngIf="isLoggedIn" (click)="openModal($event)" class="icon-link">
            <i class="fa-solid fa-user"></i>&nbsp;
            <span class="tooltip">User Profile</span>
          </a>
          
          <a (click)="openMyBidsPopup()" *ngIf="isLoggedIn" class="icon-link">
            <i class="fa-solid fa-gavel"></i>&nbsp;
            <span class="tooltip">My Bids</span>
          </a>
          
          <a (click)="openNotificationsPopup()" *ngIf="isLoggedIn" class="icon-link">
            <i class="fa-solid fa-bell"></i>&nbsp;
            <span class="tooltip">Notifications</span>
          </a>
          
          <a (click)="openOrdersPopup()" *ngIf="isLoggedIn" class="icon-link">
            <i class="fa-solid fa-box"></i>&nbsp;
            <span class="tooltip">My Orders</span>
          </a>
          

      <div class="button-container m-2">
        <!-- <button class="btn btn-info">Login</button> -->
        <button class="btn btn-primary" *ngIf="!isLoggedIn" routerLink="/login">Login</button>
        <button class="btn btn-danger" *ngIf="isLoggedIn" (click)="onLogout()">Logout</button>
      </div>
      <!-- </a> -->
    </div>

    <button id="hamburger-btn" class="hamburger-btn" (click)="toggleMenu()">&#9776;</button>
  </div>

  <div [ngClass]="{'dropdown-menu': true, 'show': menuVisible}">
    <a routerLink="/home">Home</a>
    <a routerLink="/about">About</a>
    <a routerLink="/auctions">Auctions</a>
    <a routerLink="/contact">Contact</a>
    <a routerLink="/sell-item">Auction Your Item</a>
    <a href="#" *ngIf="isLoggedIn" (click)="openModal($event)"><i class="fa-solid fa-user"></i>&nbsp;Profile</a>
    <a routerLink="/reminders" *ngIf="isLoggedIn"><i class="fa-solid fa-bell"></i>&nbsp;Reminders</a>
    <div class="button-container">
      <button class="btn btn-primary" *ngIf="!isLoggedIn" routerLink="/login">Login</button>
      <button class="btn btn-danger" *ngIf="isLoggedIn" (click)="onLogout()">Logout</button>
    </div>
  </div>
</header>

<!-- MODEL FOR THE USER'S PROFILE -->

<div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileModalLabel" style="color: indigo;">My Profile</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center">
        <img src="/assets/profile.png" alt="Profile Image" class="profile-img mb-3">
        <div class="d-flex justify-content-center">
          <p class="me-5"><strong style="color: indigo;">First Name:</strong> {{ user.firstName }}</p>
          <p><strong style="color: indigo;">Last Name:</strong> {{ user.lastName }}</p>
        </div>
        <p><strong style="color: indigo;">Email:</strong> {{ user.email }}</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- MODEL FOR SHOWING THE USERS BIDS -->

<div class="my-bids-popup" *ngIf="showMyBidsPopup">
  <div class="popup-content">
    <h3>My Bids</h3>
    <ul>
      <div *ngIf="userBids.length === 0">
        <p class="text-center">No bids yet!</p>
      </div>
      <div *ngFor="let bid of userBids">
        <p class="text-center"><b>Item Name:</b> {{ bid.auctionName }}, <b>Your Bid:</b> {{ bid.bidAmount }}, <b>Bid Time:</b> {{ bid.bidTime }}</p>
      </div>
    </ul>
    <button (click)="closeMyBidsPopup()">Close</button>
  </div>
</div>

<!-- MODAL FOR DISPLAYING THE USER'S NOTIFICATIONS -->
<!-- <div class="my-notifications-popup" *ngIf="showNotificationsPopup">
  <div class="popup-content bg-gray-50 p-6 rounded-lg shadow-lg max-w-md mx-auto">
    <h3 class="text-center text-red-800 text-2xl font-semibold mb-4">My Notifications</h3>
    <ul class="space-y-3">
      <li *ngFor="let notification of user.notifications" 
          class="p-3 border border-gray-200 rounded-lg hover:bg-gray-100 transition">
        <p class="text-gray-700">{{ notification }}</p>
      </li>
    </ul>
    <div class="text-center mt-4">
      <button class="close-btn px-5 py-2 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition"
        (click)="closeNotificationsPopup()">Close</button>
    </div>
  </div>
</div> -->

<div class="my-notifications-popup" *ngIf="showNotificationsPopup">
  <div class="popup-content bg-light p-4 rounded shadow-lg max-w-md mx-auto">
    <h3 class="text-center text-danger mb-4">My Notifications</h3>
    <ul class="notifications-list">
      <li *ngFor="let notification of user.notifications" 
          class="notification-item p-3 border border-light rounded hover-bg-light transition">
        <p class="text-dark">{{ notification }}</p>
      </li>
    </ul>
    <div class="text-center mt-4">
      <button class="close-btn btn btn-danger px-5 py-2 rounded" (click)="closeNotificationsPopup()">Close</button>
    </div>
  </div>
</div>


<!-- MY ORDERS POPUP -->

<div class="my-orders-popup" *ngIf="showOrdersPopup">
  <div class="popup-content bg-white p-6 rounded-lg shadow-lg max-w-lg mx-auto">
    <h3 class="text-center text-indigo-700 text-2xl font-semibold mb-6">My Orders</h3>

    <div class="flex justify-between items-center mb-6">
      <!-- Winning Bid Text (takes up 60%) -->
      <p class="text-gray-800 px-4 mt-4 text-sm font-medium flex-1">{{ user.winningBid || 'No winning bid yet' }}</p>

      <!-- Place Order Button (takes up 40%) -->
      <button class="place-order-btn px-4 py-2 bg-indigo-600 text-white rounded-md shadow-md hover:bg-indigo-700 transition w-40"
        [routerLink]="['/order-details']">
        Place Order
      </button>
    </div>

    <!-- Close Button -->
    <div class="text-center mt-4">
      <button class="close-btn px-4 py-2 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 transition"
        (click)="closeOrdersPopup()">
        Close
      </button>
    </div>
  </div>
</div>
